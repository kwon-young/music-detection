schema: '2.0'
stages:
  train:
    cmd: python music_detection/train/train.py  --data-path data/coco_music_keypoints
      --dataset coco_music_kp --model fasterrcnn_resnet50_fpn --batch-size 4 --epochs
      10 --output-dir data/train_output --data-augmentation nothing --lr 0.000625
      --weights-backbone ResNet50_Weights.IMAGENET1K_V1 --device $DEVICE --no-evaluate
      --use-deterministic-algorithms
    deps:
    - path: data/coco_music_keypoints
      hash: md5
      md5: 4270bd1afbc12bf68203b80e7f2b549c.dir
      size: 1300046
      nfiles: 21
    params:
      params.yaml:
        train:
          model: fasterrcnn_resnet50_fpn
          batch-size: 4
          epochs: 10
          lr: 0.000625
          weights-backbone: ResNet50_Weights.IMAGENET1K_V1
    outs:
    - path: data/train_output
      hash: md5
      md5: 1801703981c756f73101301f49e43299.dir
      size: 336629662
      nfiles: 21
  train_sparse:
    cmd: python music_detection/train/train_sparse.py
    deps:
    - path: data/coco_music_keypoints
      hash: md5
      md5: d7cb01446f0a629bec25dd4dd885eca9.dir
      size: 2984542
      nfiles: 21
    - path: music_detection/data/sparse_dataset.py
      hash: md5
      md5: a06d3e4c13aa1ff14b5e273c2fd300f7
      size: 4952
    - path: music_detection/model/sparse_model.py
      hash: md5
      md5: fae629aa4c8c80f5f3c90ee39ef5deec
      size: 1558
    - path: music_detection/params.py
      hash: md5
      md5: 8602be2715010fa3e7113030bd13f559
      size: 636
    - path: music_detection/train/train_sparse.py
      hash: md5
      md5: dad968a5cdc7255174f2275134a73d56
      size: 6414
    params:
      params.yaml:
        train_sparse:
          output_dir: data/train_sparse
          seed: 0
          dataset: data/coco_music_keypoints
          batch_size: 9
          lr: 0.01
          epochs: 10
    outs:
    - path: data/train_sparse
      hash: md5
      md5: f2cb22e1fc5d8033dda40258335f913b.dir
      size: 2996217
      nfiles: 202
