schema: '2.0'
stages:
  train:
    cmd: python music_detection/train/train.py  --data-path data/coco_music_keypoints
      --dataset coco_music_kp --model fasterrcnn_resnet50_fpn --batch-size 4 --epochs
      10 --output-dir data/train_output --data-augmentation nothing --lr 0.000625
      --weights-backbone ResNet50_Weights.IMAGENET1K_V1 --device $DEVICE --no-evaluate
      --use-deterministic-algorithms
    deps:
    - path: data/coco_music_keypoints
      hash: md5
      md5: 4270bd1afbc12bf68203b80e7f2b549c.dir
      size: 1300046
      nfiles: 21
    params:
      params.yaml:
        train:
          model: fasterrcnn_resnet50_fpn
          batch-size: 4
          epochs: 10
          lr: 0.000625
          weights-backbone: ResNet50_Weights.IMAGENET1K_V1
    outs:
    - path: data/train_output
      hash: md5
      md5: 1801703981c756f73101301f49e43299.dir
      size: 336629662
      nfiles: 21
  train_sparse:
    cmd: python music_detection/train/train_sparse.py
    deps:
    - path: data/coco_music_keypoints
      hash: md5
      md5: d7cb01446f0a629bec25dd4dd885eca9.dir
      size: 2984542
      nfiles: 21
    - path: data/coco_music_keypoints_weights.json
      hash: md5
      md5: baa46f317e7427216264f4a127c439b1
      size: 750
    - path: music_detection/data/sparse_dataset.py
      hash: md5
      md5: dd577530205b4459f712937fb0cf65bb
      size: 6226
    - path: music_detection/model/sparse_model.py
      hash: md5
      md5: 06d00da0219b7bb7d2a5ba208448be34
      size: 1672
    - path: music_detection/params.py
      hash: md5
      md5: 9a2e0fe3d63dd19b0118d51fcf0d90f1
      size: 696
    - path: music_detection/train/train_sparse.py
      hash: md5
      md5: 3b5a379b5eb112467e388311c4f984f3
      size: 8142
    params:
      params.yaml:
        train_sparse:
          output_dir: data/train_sparse
          seed: 0
          dataset: data/coco_music_keypoints
          batch_size: 9
          lr: 0.01
          epochs: 100
          weights: true
          stride: 1
          dilation: 1
    outs:
    - path: data/train_sparse
      hash: md5
      md5: a517378e955271781f4b5290778c88aa.dir
      size: 115332311
      nfiles: 82
  compute_weights:
    cmd: python music_detection/utils/compute_weights.py
    deps:
    - path: data/coco_music_keypoints
      hash: md5
      md5: d7cb01446f0a629bec25dd4dd885eca9.dir
      size: 2984542
      nfiles: 21
    - path: music_detection/data/sparse_dataset.py
      hash: md5
      md5: dd577530205b4459f712937fb0cf65bb
      size: 6226
    - path: music_detection/params.py
      hash: md5
      md5: 9a2e0fe3d63dd19b0118d51fcf0d90f1
      size: 696
    - path: music_detection/utils/compute_weights.py
      hash: md5
      md5: 330edb9d480c3aadcd09d3293843182d
      size: 1087
    params:
      params.yaml:
        train_sparse.dataset: data/coco_music_keypoints
    outs:
    - path: data/coco_music_keypoints_weights.json
      hash: md5
      md5: baa46f317e7427216264f4a127c439b1
      size: 750
